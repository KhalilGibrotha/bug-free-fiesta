{#-
==============================================================================
JINJA2 MACROS LIBRARY - FOR TEMPLATE INCLUSION ONLY
==============================================================================
This file contains reusable Jinja2 macros for documentation templates.
It is NOT intended to be processed as a standalone document.

The document processing scripts are configured to automatically exclude
this file from publication workflows.

Usage in templates:
{% import './docs/macros.j2' as macros %}
{{ macros.oxford_comma_list(['item1', 'item2', 'item3']) }}
==============================================================================
-#}

{%- macro oxford_comma_list(items) -%}
    {#-
    This macro takes a list of items and returns a string formatted with an Oxford comma.
    If the input is a single string, it returns the string as is.
    -#}

    {%- if items is not defined or items is none or items | length == 0 -%}
        MISSING VALUES MAKE ALEX SAD
    {%- elif items is string -%}
        {{- items -}}
    {%- elif items is iterable and items is not string -%}
        {%- set items = items | list -%}
        {%- if items | length == 1 -%}
            {{- items[0] -}}
        {%- else -%}
            {{- items[:-1] | join(', ') ~ ', and ' ~ items[-1] -}}
        {%- endif -%}
    {%- else -%}
        MISSING VALUES MAKE ALEX SAD
    {%- endif -%}
{%- endmacro -%}

